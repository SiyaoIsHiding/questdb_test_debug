<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PGOids.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">All in questdb Coverage Results</a> &gt; <a href="index.source.html" class="el_package">io.questdb.cutlass.pgwire</a> &gt; <span class="el_source">PGOids.java</span></div><h1>PGOids.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 *     ___                  _   ____  ____
 *    / _ \ _   _  ___  ___| |_|  _ \| __ )
 *   | | | | | | |/ _ \/ __| __| | | |  _ \
 *   | |_| | |_| |  __/\__ \ |_| |_| | |_) |
 *    \__\_\\__,_|\___||___/\__|____/|____/
 *
 *  Copyright (c) 2014-2019 Appsicle
 *  Copyright (c) 2019-2022 QuestDB
 *
 *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 ******************************************************************************/

package io.questdb.cutlass.pgwire;

import io.questdb.cairo.ColumnType;
import io.questdb.std.IntIntHashMap;
import io.questdb.std.IntList;

<span class="nc" id="L31">public class PGOids {</span>

    public static final int BINARY_TYPE_BINARY = (1 &lt;&lt; 31) | ColumnType.BINARY;
    public static final int BINARY_TYPE_BOOLEAN = (1 &lt;&lt; 31) | ColumnType.BOOLEAN;
    public static final int BINARY_TYPE_BYTE = (1 &lt;&lt; 31) | ColumnType.BYTE;
    public static final int BINARY_TYPE_CHAR = (1 &lt;&lt; 31) | ColumnType.CHAR;
    public static final int BINARY_TYPE_DATE = (1 &lt;&lt; 31) | ColumnType.DATE;
    public static final int BINARY_TYPE_DOUBLE = (1 &lt;&lt; 31) | ColumnType.DOUBLE;
    public static final int BINARY_TYPE_FLOAT = (1 &lt;&lt; 31) | ColumnType.FLOAT;
    public static final int BINARY_TYPE_INT = (1 &lt;&lt; 31) | ColumnType.INT;
    public static final int BINARY_TYPE_LONG = (1 &lt;&lt; 31) | ColumnType.LONG;
    public static final int BINARY_TYPE_LONG256 = (1 &lt;&lt; 31) | ColumnType.LONG256;
    public static final int BINARY_TYPE_SHORT = (1 &lt;&lt; 31) | ColumnType.SHORT;
    public static final int BINARY_TYPE_STRING = (1 &lt;&lt; 31) | ColumnType.STRING;
    public static final int BINARY_TYPE_SYMBOL = (1 &lt;&lt; 31) | ColumnType.SYMBOL;
    public static final int BINARY_TYPE_TIMESTAMP = (1 &lt;&lt; 31) | ColumnType.TIMESTAMP;
    public static final int BINARY_TYPE_UUID = (1 &lt;&lt; 31) | ColumnType.UUID;
    public static final int PG_BOOL = 16;
    public static final int PG_BYTEA = 17;
    public static final int PG_CATALOG_OID = 11;
    public static final int PG_CHAR = 18;
    public static final int PG_CLASS_OID = 1259;
    public static final int PG_DATE = 1082;
    public static final int PG_FLOAT4 = 700;
    public static final int PG_FLOAT8 = 701;
    public static final int PG_INT2 = 21;
    public static final int PG_INT4 = 23;
    public static final int PG_INT8 = 20;
    public static final int PG_NAMESPACE_OID = 2615;
    public static final int PG_PUBLIC_OID = 2200;
    public static final int PG_TIMESTAMP = 1114;
<span class="fc" id="L62">    public static final IntList PG_TYPE_OIDS = new IntList();</span>
<span class="fc" id="L63">    public static final CharSequence[] PG_TYPE_TO_NAME = new CharSequence[12];</span>
<span class="fc" id="L64">    public static final IntIntHashMap PG_TYPE_TO_SIZE_MAP = new IntIntHashMap();</span>
    public static final int PG_UUID = 2950;
    public static final int PG_VARCHAR = 1043;
    public static final int X_PG_BOOL = ((PG_BOOL &gt;&gt; 24) &amp; 0xff) | ((PG_BOOL &lt;&lt; 8) &amp; 0xff0000) | ((PG_BOOL &gt;&gt; 8) &amp; 0xff00) | ((PG_BOOL &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_BOOL = 1 | X_PG_BOOL;
    public static final int X_PG_BYTEA = ((PG_BYTEA &gt;&gt; 24) &amp; 0xff) | ((PG_BYTEA &lt;&lt; 8) &amp; 0xff0000) | ((PG_BYTEA &gt;&gt; 8) &amp; 0xff00) | ((PG_BYTEA &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_BYTEA = 1 | X_PG_BYTEA;
    public static final int X_PG_CHAR = ((PG_CHAR &gt;&gt; 24) &amp; 0xff) | ((PG_CHAR &lt;&lt; 8) &amp; 0xff0000) | ((PG_CHAR &gt;&gt; 8) &amp; 0xff00) | ((PG_CHAR &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_CHAR = 1 | X_PG_CHAR;
    @SuppressWarnings(&quot;NumericOverflow&quot;)
    public static final int X_PG_DATE = ((PG_DATE &gt;&gt; 24) &amp; 0xff) | ((PG_DATE &lt;&lt; 8) &amp; 0xff0000) | ((PG_DATE &gt;&gt; 8) &amp; 0xff00) | ((PG_DATE &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_DATE = 1 | X_PG_DATE;
    @SuppressWarnings(&quot;NumericOverflow&quot;)
    public static final int X_PG_FLOAT4 = ((PG_FLOAT4 &gt;&gt; 24) &amp; 0xff) | ((PG_FLOAT4 &lt;&lt; 8) &amp; 0xff0000) | ((PG_FLOAT4 &gt;&gt; 8) &amp; 0xff00) | ((PG_FLOAT4 &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_FLOAT4 = 1 | X_PG_FLOAT4;
    @SuppressWarnings(&quot;NumericOverflow&quot;)
    public static final int X_PG_FLOAT8 = ((PG_FLOAT8 &gt;&gt; 24) &amp; 0xff) | ((PG_FLOAT8 &lt;&lt; 8) &amp; 0xff0000) | ((PG_FLOAT8 &gt;&gt; 8) &amp; 0xff00) | ((PG_FLOAT8 &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_FLOAT8 = 1 | X_PG_FLOAT8;
    public static final int X_PG_INT2 = ((PG_INT2 &gt;&gt; 24) &amp; 0xff) | ((PG_INT2 &lt;&lt; 8) &amp; 0xff0000) | ((PG_INT2 &gt;&gt; 8) &amp; 0xff00) | ((PG_INT2 &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_INT2 = 1 | X_PG_INT2;
    public static final int X_PG_INT4 = ((PG_INT4 &gt;&gt; 24) &amp; 0xff) | ((PG_INT4 &lt;&lt; 8) &amp; 0xff0000) | ((PG_INT4 &gt;&gt; 8) &amp; 0xff00) | ((PG_INT4 &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_INT4 = 1 | X_PG_INT4;
    public static final int X_PG_INT8 = ((PG_INT8 &gt;&gt; 24) &amp; 0xff) | ((PG_INT8 &lt;&lt; 8) &amp; 0xff0000) | ((PG_INT8 &gt;&gt; 8) &amp; 0xff00) | ((PG_INT8 &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_INT8 = 1 | X_PG_INT8;
    @SuppressWarnings(&quot;NumericOverflow&quot;)
    public static final int X_PG_TIMESTAMP = ((PG_TIMESTAMP &gt;&gt; 24) &amp; 0xff) | ((PG_TIMESTAMP &lt;&lt; 8) &amp; 0xff0000) | ((PG_TIMESTAMP &gt;&gt; 8) &amp; 0xff00) | ((PG_TIMESTAMP &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_TIMESTAMP = 1 | X_PG_TIMESTAMP;
    @SuppressWarnings(&quot;NumericOverflow&quot;)
    public static final int X_PG_UUID = ((PG_UUID &gt;&gt; 24) &amp; 0xff) | ((PG_UUID &lt;&lt; 8) &amp; 0xff0000) | ((PG_UUID &gt;&gt; 8) &amp; 0xff00) | ((PG_UUID &lt;&lt; 24) &amp; 0xff000000);
    public static final int X_B_PG_UUID = 1 | X_PG_UUID;
<span class="fc" id="L94">    private static final IntList TYPE_OIDS = new IntList();</span>

    public static int getTypeOid(int type) {
<span class="fc" id="L97">        return TYPE_OIDS.getQuick(ColumnType.tagOf(type));</span>
    }

    static short getColumnBinaryFlag(int type) {
<span class="fc" id="L101">        return (short) ((type &gt;&gt;&gt; 31) &amp; 0xff);</span>
    }

    static int toColumnBinaryType(short code, int type) {
<span class="fc" id="L105">        return (((int) code) &lt;&lt; 31) | type;</span>
    }

    static int toColumnType(int type) {
        // clear format flag
<span class="fc" id="L110">        return type &amp; (~(1 &lt;&lt; 31));</span>
    }

    static int toParamBinaryType(short code, int type) {
<span class="fc" id="L114">        return code | type;</span>
    }

    static int toParamType(int type) {
        // clear format flag
<span class="fc" id="L119">        return type &amp; (~1);</span>
    }

    static {
<span class="fc" id="L123">        TYPE_OIDS.extendAndSet(ColumnType.STRING, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L124">        TYPE_OIDS.extendAndSet(ColumnType.TIMESTAMP, PG_TIMESTAMP); // TIMESTAMP</span>
<span class="fc" id="L125">        TYPE_OIDS.extendAndSet(ColumnType.DOUBLE, PG_FLOAT8); // FLOAT8</span>
<span class="fc" id="L126">        TYPE_OIDS.extendAndSet(ColumnType.FLOAT, PG_FLOAT4); // FLOAT4</span>
<span class="fc" id="L127">        TYPE_OIDS.extendAndSet(ColumnType.INT, PG_INT4); // INT4</span>
<span class="fc" id="L128">        TYPE_OIDS.extendAndSet(ColumnType.SHORT, PG_INT2); // INT2</span>
<span class="fc" id="L129">        TYPE_OIDS.extendAndSet(ColumnType.CHAR, PG_CHAR);</span>
<span class="fc" id="L130">        TYPE_OIDS.extendAndSet(ColumnType.SYMBOL, PG_VARCHAR); // NAME</span>
<span class="fc" id="L131">        TYPE_OIDS.extendAndSet(ColumnType.LONG, PG_INT8); // INT8</span>
<span class="fc" id="L132">        TYPE_OIDS.extendAndSet(ColumnType.BYTE, PG_INT2); // INT2</span>
<span class="fc" id="L133">        TYPE_OIDS.extendAndSet(ColumnType.BOOLEAN, PG_BOOL); // BOOL</span>
<span class="fc" id="L134">        TYPE_OIDS.extendAndSet(ColumnType.DATE, PG_TIMESTAMP); // DATE</span>
<span class="fc" id="L135">        TYPE_OIDS.extendAndSet(ColumnType.BINARY, PG_BYTEA); // BYTEA</span>
<span class="fc" id="L136">        TYPE_OIDS.extendAndSet(ColumnType.LONG256, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L137">        TYPE_OIDS.extendAndSet(ColumnType.GEOBYTE, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L138">        TYPE_OIDS.extendAndSet(ColumnType.GEOSHORT, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L139">        TYPE_OIDS.extendAndSet(ColumnType.GEOINT, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L140">        TYPE_OIDS.extendAndSet(ColumnType.GEOLONG, PG_VARCHAR); // VARCHAR</span>
<span class="fc" id="L141">        TYPE_OIDS.extendAndSet(ColumnType.UUID, PG_UUID); // VARCHAR</span>

<span class="fc" id="L143">        PG_TYPE_OIDS.add(PG_VARCHAR);</span>
<span class="fc" id="L144">        PG_TYPE_OIDS.add(PG_TIMESTAMP);</span>
<span class="fc" id="L145">        PG_TYPE_OIDS.add(PG_FLOAT8);</span>
<span class="fc" id="L146">        PG_TYPE_OIDS.add(PG_FLOAT4);</span>
<span class="fc" id="L147">        PG_TYPE_OIDS.add(PG_INT4);</span>
<span class="fc" id="L148">        PG_TYPE_OIDS.add(PG_INT2);</span>
<span class="fc" id="L149">        PG_TYPE_OIDS.add(PG_CHAR);</span>
<span class="fc" id="L150">        PG_TYPE_OIDS.add(PG_INT8);</span>
<span class="fc" id="L151">        PG_TYPE_OIDS.add(PG_BOOL);</span>
<span class="fc" id="L152">        PG_TYPE_OIDS.add(PG_BYTEA);</span>
<span class="fc" id="L153">        PG_TYPE_OIDS.add(PG_DATE);</span>
<span class="fc" id="L154">        PG_TYPE_OIDS.add(PG_UUID);</span>

<span class="fc" id="L156">        PG_TYPE_TO_SIZE_MAP.put(PG_FLOAT8, Double.BYTES);</span>
<span class="fc" id="L157">        PG_TYPE_TO_SIZE_MAP.put(PG_FLOAT4, Float.BYTES);</span>
<span class="fc" id="L158">        PG_TYPE_TO_SIZE_MAP.put(PG_INT4, Integer.BYTES);</span>
<span class="fc" id="L159">        PG_TYPE_TO_SIZE_MAP.put(PG_INT2, Short.BYTES);</span>
<span class="fc" id="L160">        PG_TYPE_TO_SIZE_MAP.put(PG_CHAR, Character.BYTES);</span>
<span class="fc" id="L161">        PG_TYPE_TO_SIZE_MAP.put(PG_INT8, Long.BYTES);</span>
<span class="fc" id="L162">        PG_TYPE_TO_SIZE_MAP.put(PG_BOOL, Byte.BYTES);</span>
<span class="fc" id="L163">        PG_TYPE_TO_SIZE_MAP.put(PG_UUID, Long.BYTES * 2);</span>

<span class="fc" id="L165">        PG_TYPE_TO_NAME[0] = &quot;varchar&quot;;</span>
<span class="fc" id="L166">        PG_TYPE_TO_NAME[1] = &quot;timestamp&quot;;</span>
<span class="fc" id="L167">        PG_TYPE_TO_NAME[2] = &quot;float8&quot;;</span>
<span class="fc" id="L168">        PG_TYPE_TO_NAME[3] = &quot;float4&quot;;</span>
<span class="fc" id="L169">        PG_TYPE_TO_NAME[4] = &quot;int4&quot;;</span>
<span class="fc" id="L170">        PG_TYPE_TO_NAME[5] = &quot;int2&quot;;</span>
<span class="fc" id="L171">        PG_TYPE_TO_NAME[6] = &quot;char&quot;;</span>
<span class="fc" id="L172">        PG_TYPE_TO_NAME[7] = &quot;int8&quot;;</span>
<span class="fc" id="L173">        PG_TYPE_TO_NAME[8] = &quot;bool&quot;;</span>
<span class="fc" id="L174">        PG_TYPE_TO_NAME[9] = &quot;binary&quot;;</span>
<span class="fc" id="L175">        PG_TYPE_TO_NAME[10] = &quot;date&quot;;</span>
<span class="fc" id="L176">        PG_TYPE_TO_NAME[11] = &quot;uuid&quot;;</span>
<span class="fc" id="L177">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>